<!DOCTYPE html>
<html>
  <head>
    <title>PhyloCanvas</title>

    <meta name="viewport" content="width=device-width" />
    <!-- Latest compiled and minified CSS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.2/css/bootstrap.min.css">
    <link rel="icon" type="image/png"  href="img/phylocanvas_logo.png">
    <!-- Optional theme -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.2/css/bootstrap-theme.min.css">
    <link href='http://fonts.googleapis.com/css?family=Roboto:400,300,700,500,100' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" href="css/phylodoc.css">
  </head>
  <body>
    <nav class="navbar navbar-inverse navbar-static-top">
      <div class="container">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle" data-toggle="leftMenuToggle" data-target="">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" href="#">Phylocanvas</a>
        </div>
      </div>
    </nav>
    <div class="hidden-xs">
      <a id="fork" target="_blank" href="https://github.com/ImperialCollegeLondon/PhyloCanvas"><img src="https://camo.githubusercontent.com/a6677b08c955af8400f44c6298f40e7d19cc5b2d/68747470733a2f2f73332e616d617a6f6e6177732e636f6d2f6769746875622f726962626f6e732f666f726b6d655f72696768745f677261795f3664366436642e706e67" alt="Fork me on GitHub" data-canonical-src="https://s3.amazonaws.com/github/ribbons/forkme_right_gray_6d6d6d.png"></a>
    </div>

    <div class="container">
      <div class="row">
        <div class="col-lg-2 col-md-3 col-sm-3">
          <nav id="leftmenu" class="hidden-xs">
              <div id="accordion_menu">
                  <ul>
                    <li><a class="" href="../index.html">Overview</a></li>
                    <li><i class="glyphicon glyphicon-cloud-upload"> </i> <a target="_blank" href="phylocanvas_app.html">Live Upload</a></li>
                    <li><a class="" href="getting_started.html">Getting Started</a></li>
                    <li><a class="" href="tech_doc.html">Technical Doc</a></li>
                    <li><a class="" href="api_ref.html">API Reference</a></li>
                    <li><a class="active" href="code_samples.html">Code Samples</a></li>
                    <li><a class="" href="contact.html">Contact Us</a></li>
                  </ul>
              </div>
          </nav>
        </div>
        <div id="content" class="col-lg-9 col-md-8 col-sm-8">
          <section id="code_samples">
            <h1> Code Samples </h1>
            <hr>
            <p> This page includes live examples on how to use the functionalities of PhyloCanvas </p>
            <ul>
              <li><a href="#cs_loadATreeFile">Load Tree</a></li>
              <li><a href="#cs_setTreeType">Set Tree Type</a></li>
              <li><a href="#cs_showHideLabels">Show/Hide Labels</a></li>
              <li><a href="#cs_collapseExpand">Collapse/Expand</a></li>
              <li><a href="#cs_increaseNodeSize">Increase Node Size</a></li>
              <li><a href="#cs_colorNodes">Color Nodes</a></li>
              <li><a href="#cs_backColour">Color Branches</a></li>
              <li><a href="#cs_rotateBranch">Rotate Branch</a></li>
              <li><a href="#cs_search">Search Highlight</a></li>
              <li><a href="#cs_contextMenu">Context Menu</a></li>
              <li><a href="#cs_overlayMetadata">Overlay Metadata</a></li>

            </ul>
            <a href="#code_samples" class='gotop'>Top</a>
            <div id="cs_loadATreeFile" class="section">
              <h3>Load Tree</h3>
              <p class="title"> Using Newick string <p>
              <p></p>
              <pre>
var phylocanvas = new PhyloCanvas.Tree(<i>div_name</i>, <i>[config object]</i>); // initialize your tree viewer
var newick_str = "(A:0.1,B:0.2,(C:0.3,D:0.4)E:0.5)F;"
phylocanvas.load(<i>newick_str</i>); // load your newick string or file</pre>
              <a class="showExample" data-height="375" data-href="http://jsbin.com/jepuqi/3/embed?output">View live</a>

              <p class="title"> Using Newick file <p>
              <pre class="code">
var phylocanvas = new PhyloCanvas.Tree(<i>div_name</i>, <i>[config object]</i>); // initialize your tree viewer
var newick_file = "<path to your tree file>";
phylocanvas.load(<i>newick_file</i>); // load your newick string or file</pre>
              <a class="" target="_blank" href="https://raw.githubusercontent.com/jyothishnt/PhyloCanvas-API-Site/master/data/tree.nwk">View Newick File</a> |
              <a class="showExample" data-height="375" data-href="http://jsbin.com/teqero/3/embed?output">View live</a>
            </div>

            <a href="#code_samples" class='gotop'>Top</a>
            <div id="cs_setTreeType">
              <h3>Set Tree Type</h3>
              <p></p>
              <pre>
phylocanvas.setTreeType('rectangular'); // Takes radial, rectangular, circular, diagonal and hierarchy</pre>
              <p class="cs_description"> A <code>typechanged</code> event is fired whenever a tree type is changed which invokes addSnapShot() to add a snapshot in the history. </p>
              <a class="showExample" data-height="450" data-href="http://jsbin.com/pofuwu/4/embed?output">View live</a>
            </div>

            <a href="#code_samples" class='gotop'>Top</a>
            <div id="cs_showHideLabels">
              <h3>Show/Hide Labels</h3>
              <p>To show or hide labels use the below functions</p>
              <pre>
phylocanvas.displayLabels(); // Show labels
phylocanvas.hideLabels(); // Hide labels
// or
phylocanvas.toggleLabels(); // Toggle labels</pre>
              <a class="showExample" data-height="450" data-href="http://jsbin.com/kivola/2/embed?output">View live</a>
            </div>

            <a href="#code_samples" class='gotop'>Top</a>
            <div id="cs_collapseExpand">
              <h3>Collapse/Expand</h3>
              <p>Each <code>Branch</code> has <code>collapsed = true/false</code> property which is used while drawing the tree to see if the branch has to be collapsed or not.
                The example below shows how you traverse through each branch and collapse one that matches a branch id.
              </p>
<pre>
// Here 'pcn5' is the branch id
phylocanvas.branches['pcn5'].collapsed = true;
phylocanvas.draw();
</pre>
              <a class="showExample" data-height="510" data-href="http://jsbin.com/gozede/1/embed?output">View live</a>

            </div>

            <a href="#code_samples" class='gotop'>Top</a>
            <div id="cs_increaseNodeSize">
              <h3>Increase Node / Label Size </h3>
              <p>Use<code>setNodeSize()</code> and <code>setTextSize()</code> to change the size of node and text.</p>
              <pre>
phylocanvas.setNodeSize = 10;
phylocanvas.setTextSize = 20;</pre>
              <a class="showExample" data-height="480" data-href="http://jsbin.com/bedese/22/embed?output">View live</a>
            </div>

            <a href="#code_samples" class='gotop'>Top</a>
            <div id="cs_colorNodes">
              <h3>Color Nodes</h3>
              <p><code>setNodeColourAndShape</code> is used to set the color and shape of a node.<br>
              <dl class="dl-horizontal">
                <dt>nodeIds: (Array/String)</dt>
                <dd>Array / comma separated string.</dd>
                <dt>Color</dt>
                <dd>Color of the node in <b>rgb/hex/colornames</b> format Eg: red, rgb(255,0,0), #adadad </dd>
                <dt>Shapes</dt>
                <dd>
                  <ul>
                    <li>x = star</li>
                    <li>s = square</li>
                    <li>o = circle</li>
                    <li>t = triangle</li>
                  </ul>
                </dd>
                <dt>Size</dt>
                <dd>Size of the node </dd>
              </dl>
              <pre>
phylocanvas.setNodeColourAndShape("1,2,3", 'orange', 'x');
phylocanvas.draw(); </pre>
               <a class="showExample" data-height="375" data-href="http://jsbin.com/pubozo/4/embed?output">View live</a>
            </div>

            <a href="#code_samples" class='gotop'>Top</a>
            <div id="cs_backColour">
              <h3>Color Branches</h3>
              <p>Setting <code>backColour</code> to <code>true/false</code> will colour the branches of the tree based on the colour of the tips</p>
<pre>
phylocanvas.backColour = true;
phylocanvas.setNodeColourAndShape('1', 'rgb(250, 150, 50)', 'x');
phylocanvas.draw(); </pre>
               <a class="showExample" data-height="480" data-href="http://jsbin.com/picequ/17/embed?output">View live</a>
            </div>

            <a href="#code_samples" class='gotop'>Top</a>
            <div id="cs_rotateBranch">
              <h3>Rotate Branch</h3>
              <p>Use the branch function <code>rotate()</code> to rotate a branch.</p>
<pre>
// Here 'pcn5' is the branch id
phylocanvas.branches['pcn5'].rotate(event);
phylocanvas.draw();</pre>
               <a class="showExample" data-height="480" data-href="http://jsbin.com/rigibu/7/embed?output">View live</a>
            </div>

          </section>

            <a href="#code_samples" class='gotop'>Top</a>
            <div id="cs_search">
              <h3>Search Highlight</h3>
              <p>Search could be done using the Tree function <code>findBranch()</code> to rotate a branch.</p>
<pre>
phylocanvas.findBranch(<i>value</i>);  // <i>value</i> = search pattern </pre>

              <p class="cs_description">
                The above function uses <code>Branch.setSelected()</code> to highlight the branch
                For example, the below code makes <code>Branch.selected = false</code> for all children of root.
              </p>
<pre>
phylocanvas.root.setSelected(false, true);
phylocanvas.draw();</pre>
               <a class="showExample" data-height="480" data-href="http://jsbin.com/dazuzu/12/embed?output">View live</a>
            </div>

            <a href="#code_samples" class='gotop'>Top</a>
            <div id="cs_contextMenu">
              <h3>ContextMenu</h3>
              <p>Right Click menu choices, an array of dictionaries with properties<br>
              You could configure them at the time of Tree initialization like below.
<pre>
// Construct tree object
phylocanvas = new PhyloCanvas.Tree('phylocanvas', {
  // other options
  contextMenu : [{
    text: 'Normal Menu',
    handler: 'triggerNormal',
    internal: false,
    leaf: false
  }, {
    text: 'Internal Menu',
    handler: 'triggerInternal',
    internal: true,
    leaf: true
  }, {
    text: 'Save as PNG',
    handler: 'exportCurrentTreeView',
    internal: false,
    leaf: false
  }]
});</pre>

              <p class="cs_description">

                <dl class="dl-horizontal">
                  <dt>text</dt>
                    <dd>The label of the menu item</dd>

                  <dt>handler</dt>
                    <dd>The function in the Tree object that the menu item invokes. If
                    a node has been clicked on it is padded to the handler</dd>

                  <dt>internal</dt>
                    <dd>Does this function apply to an internal node</dd>

                  <dt>leaf</dt>
                    <dd>Does this function apply to a leaf</dd>
                </dl>
              </p>

              <a class="showExample" data-height="480" data-href="http://jsbin.com/bucodoneta/8/embed?output">View live</a>
            </div>

            <a href="#code_samples" class='gotop'>Top</a>
            <div id="cs_overlayMetadata">
              <h3>Overlay Metadata</h3>
              <p>If you store an object as {column_name: value} in the <code>data</code> attribute of each leaf node, then you could overlay metadata on to the tree by using the function <code>viewMetadataColumns()</code></p>
              <p> <i>value = 0/1</i>.  All true values will be drawn as a rectangular block representing a presence or absence.</p>
              <p><code>viewMetadataColumns()</code> takes an array of column names as argument which is same as the column name stored in the <code>data</code> object. If no arguments are specified, then it will overlay all columns </p>
              <p>See example below </p>
<pre>
// Creating data object for few leaf nodes after tree load
phylocanvas.branches['1']['data'] = {'Column1': 1, 'Column2': 0};
phylocanvas.branches['3']['data'] = {'Column1': 0, 'Column2': 1};
phylocanvas.branches['9']['data'] = {'Column1': 0, 'Column2': 1};

phylocanvas.viewMetadataColumns(); // Display columns
</pre>

              <p><code>showMetadata = true/false</code> is used to show or hide metadata</p>
              <a class="showExample" data-height="480" data-href="http://jsbin.com/rokonigeqa/4/embed?output">View live</a>
            </div>

          </section>
        </div>
      </div>
    </div>
    <footer class="footer">
      <p>cGPS <i class="fa fa-copyright"></i> &copy; 2015</p>
    </footer>
  </body>
  <script src="//code.jquery.com/jquery-2.1.1.min.js"></script>
  <!-- Latest compiled and minified JavaScript -->
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.2/js/bootstrap.min.js"></script>
  <script src="js/phylodoc.js"></script>
  <script type="application/javascript" src="https://cdn.rawgit.com/ImperialCollegeLondon/PhyloCanvas/master/src/scripts/PhyloCanvas.js"></script>
  <script>
    window.onload = function() {
      createOverviewTree();
    }
  </script>
</html>